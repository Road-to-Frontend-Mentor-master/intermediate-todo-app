!function(){const t="todo-list",e=(document.getElementById("todo-list"),document.getElementById("todo-list-form")),n=document.getElementById("new-todo-form"),d=document.getElementById("add-new-todo"),o=document.getElementById("add-new-todo-checkbox"),c=document.getElementById("clear-completed"),a=document.getElementById("filter-all"),i=document.getElementById("filter-active"),s=document.getElementById("filter-completed");function r({tag:t,attributes:e=[],classes:n=[]}){const d=document.createElement(t);return e.forEach((t=>{d.setAttribute(...t)})),n.forEach((t=>{d.classList.add(t)})),d}const l=(t,e)=>{t.preventDefault(),e.deleteItem(t.target.dataset.todoId),e.save(),e.drawList()},u=(t,e)=>{const{todoId:n}=t.target.dataset,{checked:d}=document.getElementById(`todo-checkbox-${n}`);e.updateItem({id:n,checked:!d}),e.save(),e.drawList(e.getListState())},m=function(t=[],{containerDOMElId:e,leftItemsDOMEl:n}){let d=[...t],o="all";const c={all:"all",active:"active",completed:"completed"};function a(t){const{id:e}=t,n=function({checked:t,text:e,id:n}){let d=[["type","checkbox"],["name","todos"],["id",`todo-checkbox-${n}`],["value",e]];return t&&(d=[...d,["checked","checked"]]),r({tag:"input",attributes:d,classes:["form__checkbox"]})}(t),d=function(t){return r({tag:"label",attributes:[["for",`todo-checkbox-${t}`],["data-todo-id",t]],classes:["form__checkbox-label"]})}(e),o=function(t){return r({tag:"button",attributes:[["data-todo-id",t]],classes:["form__delete-button"]})}(e),c=function(t){return r({tag:"img",attributes:[["src","images/icon-cross.svg"],["alt","Delete todo icon"],["data-todo-id",t]],classes:["form__cross"]})}(e),a=function({text:t,id:e}){return r({tag:"input",attributes:[["type","text"],["name",`todo-input-${e}`],["placeholder","Task name"],["value",t],["id",`todo-input-${e}`]],classes:["form__input"]})}(t);return o.appendChild(c),((...t)=>e=>t.reduce(((t,e)=>(t.appendChild(e),t)),e))(n,d,a,o)(r({tag:"li",classes:["form__field"]}))}function i(){return s().length}function s(){return d.filter((t=>!t.checked))}function l(){return d.filter((t=>t.checked))}function u(){return d}return{addItem:function(t){d.push(t)},deleteItem:function(t){d=d.filter((e=>e.id!==t))},updateItem:function(t){d=d.map((e=>e.id===t.id?{...e,...t}:e))},drawList:function(t=c.all){const n=document.createDocumentFragment();(function(t){return t===c.active?s():t===c.completed?l():u()})(t).forEach((t=>{n.appendChild(a(t))})),document.getElementById(e).innerHTML="",document.getElementById(e).appendChild(n)},getList:u,save:function(){!function(t,e="todo-list"){localStorage.setItem(e,JSON.stringify(t))}(d)},clearCompleted:function(){d=d.filter((t=>!t.checked))},getActiveTodos:s,getCompletedTodos:l,getListState:function(){return o},setListState:function(t){o=t},getItemsLeft:i,LIST_STATES:c,drawItemsLeft:function(){document.getElementById(n).innerHTML=`${i()} items left`}}}(function(t="todo-list"){return JSON.parse(localStorage.getItem(t))}(t)??[],{containerDOMElId:"todo-list",leftItemsDOMEl:"items-left"});m.drawList(),m.drawItemsLeft(),e.addEventListener("click",(t=>function(t,e){t.target.classList.contains("form__delete-button")?l(t,e):t.target.classList.contains("form__checkbox-label")&&u(t,e),e.drawItemsLeft()}(t,m))),n.addEventListener("submit",(t=>function(t,e,n,d){t.preventDefault();const{value:o}=e,{checked:c}=n,a={text:o,checked:c,id:uuidv4()};d.addItem(a),d.drawList(d.getListState()),d.drawItemsLeft(),d.save(),e.value="",n.checked=!1}(t,d,o,m))),c.addEventListener("click",(()=>{m.clearCompleted(),m.save(),m.drawList(),m.drawItemsLeft()})),i.addEventListener("click",(()=>{return(t=m).setListState(t.LIST_STATES.active),void t.drawList(t.LIST_STATES.active);var t})),s.addEventListener("click",(()=>{return(t=m).setListState(t.LIST_STATES.completed),void t.drawList(t.LIST_STATES.completed);var t})),a.addEventListener("click",(()=>{return(t=m).setListState(t.LIST_STATES.all),t.drawList(),void t.drawItemsLeft();var t}))}();