!function(){const t="todo-list",e=(document.getElementById("todo-list"),document.getElementById("todo-list-form")),n=document.getElementById("new-todo-form"),o=document.getElementById("add-new-todo"),d=document.getElementById("add-new-todo-checkbox"),c=document.getElementById("clear-completed"),i=document.getElementById("filter-active"),a=document.getElementById("filter-completed");function s({tag:t,attributes:e=[],classes:n=[]}){const o=document.createElement(t);return e.forEach((t=>{o.setAttribute(...t)})),n.forEach((t=>{o.classList.add(t)})),o}const r=function(t=[],e){let n=[...t];function o(t){const{id:e}=t,n=function({checked:t,text:e,id:n}){let o=[["type","checkbox"],["name","todos"],["id",`todo-checkbox-${n}`],["value",e]];return t&&(o=[...o,["checked","checked"]]),s({tag:"input",attributes:o,classes:["form__checkbox"]})}(t),o=function(t){return s({tag:"label",attributes:[["for",`todo-checkbox-${t}`]],classes:["form__checkbox-label"]})}(e),d=function(t){return s({tag:"button",attributes:[["data-todo-id",t]],classes:["form__delete-button"]})}(e),c=function(t){return s({tag:"img",attributes:[["src","images/icon-cross.svg"],["alt","Delete todo icon"],["data-todo-id",t]],classes:["form__cross"]})}(e),i=function({text:t,id:e}){return s({tag:"input",attributes:[["type","text"],["name",`todo-input-${e}`],["placeholder","Task name"],["value",t],["id",`todo-input-${e}`]],classes:["form__input"]})}(t);return d.appendChild(c),((...t)=>e=>t.reduce(((t,e)=>(t.appendChild(e),t)),e))(n,o,i,d)(s({tag:"li",classes:["form__field"]}))}return{addItem:function(t){n.push(t)},deleteItem:function(t){n=n.filter((e=>e.id!==t))},updateItem:function(t){n=n.map((e=>e.id===t.id?{...e,...t}:e))},drawList:function(t=n){const d=document.createDocumentFragment();t.forEach((t=>{d.appendChild(o(t))})),document.getElementById(e).innerHTML="",document.getElementById(e).appendChild(d)},getList:function(){return n},save:function(){!function(t,e="todo-list"){localStorage.setItem(e,JSON.stringify(t))}(n)},clearCompleted:function(){n=n.filter((t=>t.checked))},getActiveTodos:function(){return n.filter((t=>!t.checked))},getCompletedTodos:function(){return n.filter((t=>t.checked))}}}(function(t="todo-list"){return JSON.parse(localStorage.getItem(t))}(t)??[],"todo-list");r.drawList(),e.addEventListener("click",(t=>function(t,e){t.target.classList.contains("form__delete-button")?(t.preventDefault(),e.deleteItem(t.target.dataset.todoId),e.save(),e.drawList()):t.target.classList.contains("form__checkbox-label")}(t,r))),n.addEventListener("submit",(t=>function(t,e,n,o){t.preventDefault();const{value:d}=e,{checked:c}=n,i={text:d,checked:c,id:uuidv4()};o.addItem(i),o.drawList(),o.save(),e.value=""}(t,o,d,r))),c.addEventListener("click",(()=>{r.clearCompleted(),r.drawList(r.getList())})),i.addEventListener("click",(()=>r.drawList(r.getActiveTodos()))),a.addEventListener("click",(()=>r.drawList(r.getCompletedTodos())))}();