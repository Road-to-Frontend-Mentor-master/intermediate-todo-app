!function(){const t="todo-list",e=(document.getElementById("todo-list"),document.getElementById("todo-list-form")),n=document.getElementById("new-todo-form"),c=document.getElementById("add-new-todo"),o=document.getElementById("add-new-todo-checkbox"),d=document.getElementById("clear-completed"),i=document.getElementById("filter-all"),a=document.getElementById("filter-active"),s=document.getElementById("filter-completed"),l=document.getElementById("filter-list"),r=[...document.querySelectorAll(".filter__button")];function u({tag:t,attributes:e=[],classes:n=[]}){const c=document.createElement(t);return e.forEach((t=>{c.setAttribute(...t)})),n.forEach((t=>{c.classList.add(t)})),c}const m=(t,e)=>{t.preventDefault(),e.deleteItem(t.target.dataset.todoId),e.save(),e.drawList()},f=(t,e)=>{const{todoId:n}=t.target.dataset,{checked:c}=document.getElementById(`todo-checkbox-${n}`);e.updateItem({id:n,checked:!c}),e.save(),e.drawList(e.getListState())},L=function(t=[],{containerDOMElId:e,leftItemsDOMEl:n}){let c=[...t],o="all";const d={all:"all",active:"active",completed:"completed"};function i(t){const{id:e}=t,n=function({checked:t,text:e,id:n}){let c=[["type","checkbox"],["name","todos"],["id",`todo-checkbox-${n}`],["value",e]];return t&&(c=[...c,["checked","checked"]]),u({tag:"input",attributes:c,classes:["form__checkbox"]})}(t),c=function(t){return u({tag:"label",attributes:[["for",`todo-checkbox-${t}`],["data-todo-id",t]],classes:["form__checkbox-label"]})}(e),o=function(t){return u({tag:"button",attributes:[["data-todo-id",t]],classes:["form__delete-button"]})}(e),d=function(t){return u({tag:"img",attributes:[["src","images/icon-cross.svg"],["alt","Delete todo icon"],["data-todo-id",t]],classes:["form__cross"]})}(e),i=function({text:t,id:e}){return u({tag:"input",attributes:[["type","text"],["name",`todo-input-${e}`],["placeholder","Task name"],["value",t],["id",`todo-input-${e}`]],classes:["form__input"]})}(t);return o.appendChild(d),((...t)=>e=>t.reduce(((t,e)=>(t.appendChild(e),t)),e))(n,c,i,o)(u({tag:"li",classes:["form__field"]}))}function a(){return s().length}function s(){return c.filter((t=>!t.checked))}function l(){return c.filter((t=>t.checked))}function r(){return c}return{addItem:function(t){c.push(t)},deleteItem:function(t){c=c.filter((e=>e.id!==t))},updateItem:function(t){c=c.map((e=>e.id===t.id?{...e,...t}:e))},drawList:function(t=d.all){const n=document.createDocumentFragment();(function(t){return t===d.active?s():t===d.completed?l():r()})(t).forEach((t=>{n.appendChild(i(t))})),document.getElementById(e).innerHTML="",document.getElementById(e).appendChild(n)},getList:r,save:function(){!function(t,e="todo-list"){localStorage.setItem(e,JSON.stringify(t))}(c)},clearCompleted:function(){c=c.filter((t=>!t.checked))},getActiveTodos:s,getCompletedTodos:l,getListState:function(){return o},setListState:function(t){o=t},getItemsLeft:a,LIST_STATES:d,drawItemsLeft:function(){document.getElementById(n).innerHTML=`${a()} items left`}}}(function(t="todo-list"){return JSON.parse(localStorage.getItem(t))}(t)??[],{containerDOMElId:"todo-list",leftItemsDOMEl:"items-left"});L.drawList(),L.drawItemsLeft(),e.addEventListener("click",(t=>function(t,e){t.target.classList.contains("form__delete-button")?m(t,e):t.target.classList.contains("form__checkbox-label")&&f(t,e),e.drawItemsLeft()}(t,L))),n.addEventListener("submit",(t=>function(t,e,n,c){t.preventDefault();const{value:o}=e,{checked:d}=n,i={text:o,checked:d,id:uuidv4()};c.addItem(i),c.drawList(c.getListState()),c.drawItemsLeft(),c.save(),e.value="",n.checked=!1}(t,c,o,L))),d.addEventListener("click",(()=>{L.clearCompleted(),L.save(),L.drawList(),L.drawItemsLeft()})),a.addEventListener("click",(()=>{return(t=L).setListState(t.LIST_STATES.active),void t.drawList(t.LIST_STATES.active);var t})),s.addEventListener("click",(()=>{return(t=L).setListState(t.LIST_STATES.completed),void t.drawList(t.LIST_STATES.completed);var t})),i.addEventListener("click",(()=>{return(t=L).setListState(t.LIST_STATES.all),t.drawList(),void t.drawItemsLeft();var t})),l.addEventListener("click",(function({target:t}){if(t.classList.contains("filter__button")){const n="filter__button--active";e=n,t.classList.contains(e)||(function(t,e){t.find((t=>t.classList.contains(e))).classList.remove(e)}(r,n),t.classList.add(n))}var e}))}();