!function(){const t="todo-list",e=(document.getElementById("todo-list"),document.getElementById("todo-list-form")),d=document.getElementById("new-todo-form"),n=document.getElementById("add-new-todo"),o=document.getElementById("add-new-todo-checkbox"),c=document.getElementById("clear-completed"),a=document.getElementById("filter-all"),i=document.getElementById("filter-active"),s=document.getElementById("filter-completed");function r({tag:t,attributes:e=[],classes:d=[]}){const n=document.createElement(t);return e.forEach((t=>{n.setAttribute(...t)})),d.forEach((t=>{n.classList.add(t)})),n}const l=(t,e)=>{t.preventDefault(),e.deleteItem(t.target.dataset.todoId),e.save(),e.drawList()},u=(t,e)=>{const{todoId:d}=t.target.dataset,{checked:n}=document.getElementById(`todo-checkbox-${d}`);e.updateItem({id:d,checked:!n}),e.save(),e.drawList(e.getListState())},m=function(t=[],e){let d=[...t],n="all";const o={all:"all",active:"active",completed:"completed"};function c(t){const{id:e}=t,d=function({checked:t,text:e,id:d}){let n=[["type","checkbox"],["name","todos"],["id",`todo-checkbox-${d}`],["value",e]];return t&&(n=[...n,["checked","checked"]]),r({tag:"input",attributes:n,classes:["form__checkbox"]})}(t),n=function(t){return r({tag:"label",attributes:[["for",`todo-checkbox-${t}`],["data-todo-id",t]],classes:["form__checkbox-label"]})}(e),o=function(t){return r({tag:"button",attributes:[["data-todo-id",t]],classes:["form__delete-button"]})}(e),c=function(t){return r({tag:"img",attributes:[["src","images/icon-cross.svg"],["alt","Delete todo icon"],["data-todo-id",t]],classes:["form__cross"]})}(e),a=function({text:t,id:e}){return r({tag:"input",attributes:[["type","text"],["name",`todo-input-${e}`],["placeholder","Task name"],["value",t],["id",`todo-input-${e}`]],classes:["form__input"]})}(t);return o.appendChild(c),((...t)=>e=>t.reduce(((t,e)=>(t.appendChild(e),t)),e))(d,n,a,o)(r({tag:"li",classes:["form__field"]}))}function a(){return d.filter((t=>!t.checked))}function i(){return d.filter((t=>t.checked))}function s(){return d}return{addItem:function(t){d.push(t)},deleteItem:function(t){d=d.filter((e=>e.id!==t))},updateItem:function(t){d=d.map((e=>e.id===t.id?{...e,...t}:e))},drawList:function(t=o.all){const d=document.createDocumentFragment();(t===o.active?a():t===o.completed?i():s()).forEach((t=>{d.appendChild(c(t))})),document.getElementById(e).innerHTML="",document.getElementById(e).appendChild(d)},getList:s,save:function(){!function(t,e="todo-list"){localStorage.setItem(e,JSON.stringify(t))}(d)},clearCompleted:function(){d=d.filter((t=>!t.checked))},getActiveTodos:a,getCompletedTodos:i,getListState:function(){return n},setListState:function(t){n=t},LIST_STATES:o}}(function(t="todo-list"){return JSON.parse(localStorage.getItem(t))}(t)??[],"todo-list");m.drawList(),e.addEventListener("click",(t=>function(t,e){t.target.classList.contains("form__delete-button")?l(t,e):t.target.classList.contains("form__checkbox-label")&&u(t,e)}(t,m))),d.addEventListener("submit",(t=>function(t,e,d,n){t.preventDefault();const{value:o}=e,{checked:c}=d,a={text:o,checked:c,id:uuidv4()};n.addItem(a),n.drawList(n.getListState()),n.save(),e.value="",d.checked=!1}(t,n,o,m))),c.addEventListener("click",(()=>{m.clearCompleted(),m.save(),m.drawList()})),i.addEventListener("click",(()=>{return(t=m).setListState(t.LIST_STATES.active),void t.drawList(t.LIST_STATES.active);var t})),s.addEventListener("click",(()=>{return(t=m).setListState(t.LIST_STATES.completed),void t.drawList(t.LIST_STATES.completed);var t})),a.addEventListener("click",(()=>m.drawList()))}();